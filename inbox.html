<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- If IE use the latest rendering engine -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Set the page to the width of the device and set the zoon level -->
<meta name="viewport" content="width = device-width, initial-scale = 1">
<title>Inbox</title>
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/uilib/maincss.css">
<style type="text/css" media="all">
 
      
@import "maincss.css";

    #map {
        height: 400px;  /* The height is 400 pixels */
        width: 100%;  /* The width is the width of the web page */
       }

       
</style>

</head>

<body>

<!-- CONTAINERS -->
<!-- container puts padding around itself while container-fluid fills the whole screen. Bootstap grids require a container. -->

<div class ="header">
<h1>SFSU Software Engineering Project</h1>
<h1>CSC 648-848, Spring 2019</h1>
<h1>For Demonstration Only</h1>
 <div class="topnav">
   <a  href="/home"><image src="/uilib/GatorDensLogo.png" height="30px" width="30px"></image></a>
  <a href="/dashboard">Dashboard</a>
  <a href="/post_new">Post</a>
  <a href="/about">About</a>
  <a class="active" href="/login">Login</a>
  <a href="/inbox">Inbox</a>
</div>
<div class="container">
<div class="row">
<div class="search-box">
<form action="/results" method="POST">
        <div class="search-box">
            <select name="type">
              <option value="">Pick Type</option>
              <option value="House">House</option>
              <option value="Apartment">Apartment</option>
              <option value="Room">Room</option>
            </select>
            <input type="text" name="query" maxlength="40" placeholder="Type to search">
            <button class="btn" type="submit">Search</button>
         </div>
    </form>
 </div>
 </div>
</div>
</div>
<div class="container-fluid">
<div class="row">
<div class="col-sm-6">
    <div class="inbox">
	<br><br>
      <h1 style="text-align: center; font-weight: bold;">Inbox:</h1>
      <h2>Unread:</h2>
    {% for msg in messages %}
        <div class="table-unread" style="border: 1px solid black;
      padding: 10px; margin-bottom: 50px;">
        <div class="check-box" style="float: left; margin-right: 30px; margin-top: 25px;">
         <div class="box"
         style="width: 30px; height: 30px; border: 1px solid black;">
       </div>
        </div>
        <div class="description" style="display: table-cell;">
          <p>{{msg.from_user}}</p>
          <p>{{msg.message}}</p>
          </div>
        <!--<div class="buttons" style="text-align: right;">-->
          <!--<button style="background: none; border: none" class="popup1open">Reply</button>-->
        <!--</div>-->
      </div>
    {% endfor %}

      <!-- <div class="table-unread" style="border: 1px solid black;
      padding: 10px; margin-bottom: 50px;">
        <div class="check-box" style="float: left; margin-right: 30px; margin-top: 25px;">
         <div class="box" 
         style="width: 30px; height: 30px; border: 1px solid black;">
       </div>
        </div>
        <div class="description" style="display: table-cell;">
          <p>Sender's Username</p>
          <p>Subject Line</p>
          </div>
        <div class="buttons" style="text-align: right;">
          <button style="background: none; border: none">Mark as Read</button>
          <button style="background: none; border: none; margin-left: 50px;">Delete</button>
        </div>
      </div>

      <h2>Read:</h2>
      <div class="table-read" style="border: 1px solid black;
      padding: 10px;">
        <div class="check-box" style="float: left; margin-right: 30px; margin-top: 25px;">
         <div class="box" 
         style="width: 30px; height: 30px; border: 1px solid black;">
       </div>
        </div>
        <div class="description" style="display: table-cell;">
          <p>Sender's Username</p>
          <p>Subject Line</p>
          </div>
        <div class="buttons" style="text-align: right;">
          <button style="background: none; border: none">Mark as Unread</button>
          <button style="background: none; border: none; margin-left: 50px;">Delete</button>
        </div>
      </div> -->

    </div>
</div>
<div class="col-sm-3 extendright">
        <style type="text/css">
            .my_content_container a {
        border-bottom: 1px solid #777777;
        border-left: 1px solid #000000;
         border-right: 1px solid #333333;
         border-top: 1px solid #000000;
         color: #000000;
         display: block;
         height: 2.5em;
         padding: 0 1em;
         width: 5em;
         text-decoration: none;
}
        </style>
    <br>
    <br>
    <br>
    <!--<center>-->
        <!--<button style="width: 200px; height: 100px; background-color:orange;" class="btn" type="submit">C O N T A C T</button>-->
    <!--</center>-->
    <br>
	<!--<center>-->
        <!--<button style="width: 200px; height: 100px; background-color:orange;" class="btn popup1open" type="submit">M E S S A G E</button>-->
    <!--</center>-->
    <!--<br>-->
    <!--<h1>Price: $199/month</h1>-->
    <!--<br>-->
    <!--<br>-->
    <!--<h1>Location:</h1>-->
    <!--<div id="map"></div>-->


    <!--<script>-->
<!--// Initialize and add the map-->
<!--function initMap() {-->
  <!--// The location of Uluru-->
  <!--var uluru = {lat: 37.766365, lng: -122.468588};-->
  <!--// The map, centered at Uluru-->
  <!--var map = new google.maps.Map(-->
      <!--document.getElementById('map'), {zoom: 15, center: uluru});-->
  <!--// The marker, positioned at Uluru-->
  <!--var marker = new google.maps.Marker({position: uluru, map: map});-->
<!--}-->
    <!--</script>-->
    <!--&lt;!&ndash;Load the API from the specified URL-->
    <!--* The async attribute allows the browser to render the page while the API loads-->
    <!--* The key parameter will contain your own API key (which is not needed for this tutorial)-->
    <!--* The callback parameter executes the initMap() function-->
    <!--&ndash;&gt;-->
    <!--<script async defer-->
    <!--src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAkhleRRi27m1XavY3E39qXOodtUQ9uxQQ&callback=initMap">-->
    <!--</script>-->
    <!--<h2>Distance from school:</h2>-->
    <!--<h2>5 miles </h2>-->

</div>
</div>
</div>
<div class="popup-container" id="popup1" >
            <div class="popup-wrapper">
            
            <div class="popup-content">
            
            <div class="form">
              <div id="close"><a href="javascript:void(0)" class="popup1close">Ã—</a></div>
              <h2>Message</h2>
                <textarea name="msg" rows="10" placeholder="Your Message"></textarea>
            </div>

            <p class="send-btn"><a onclick="send_message()" class="popup1close">Send</a></p>
            </div>
            </div>
          </div>
<!-- page-header adds space aroundtext and enlarges it. It also adds an underline at the end -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script>
        $(document).ready(function(){
          $(".popup-container").hide();
          $(".popup1open").click(function(){
            $("#popup1").fadeIn();
          });
        
            $(".popup1close").click(function(){
            $("#popup1").fadeOut();
           });  
        });

</script>
<script>
var slideIndex = 1;
showDivs(slideIndex);

function plusDivs(n) {
  showDivs(slideIndex += n);
}

function showDivs(n) {
  var i;
  var x = document.getElementsByClassName("mySlides");
  if (n > x.length) {slideIndex = 1}
  if (n < 1) {slideIndex = x.length}
  for (i = 0; i < x.length; i++) {
    x[i].style.display = "none";
  }
  x[slideIndex-1].style.display = "block";
}
</script>
<script>
    function send_message(sender_id, recipient_id) {
        message = document.getElementsByName("msg")[0].value
        $.ajax({
            type: 'POST',
            url: '/send_message',
            data: JSON.stringify({'sender_id': sender_id, 'recipient_id':recipient_id, 'message':message}),
            success: function(response) {
               // do nothing
            },
            contentType: "application/json"
        });
    }
</script>
</body>
</html>